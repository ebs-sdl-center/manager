import{u as k,s as v,b as H}from"./colorUtil-BZpS4bbY.js";import{d as w,c as C,r as V,o as z,a as r,b as s,g as p,t as n,u as x,F as i,e as f,j as h,n as c,h as g,k as M,f as l}from"./index-DrCOBNvz.js";const F={class:"wrapper px-2 py-4 md:px-6"},L={class:"mb-4 w-full border text-base"},B={class:"bg-gray-100 text-sm md:text-xl"},E={class:"border px-2 py-1"},S={class:"text-base font-normal"},D={class:"border px-2 py-1"},N={class:"text-base font-normal"},j=["rowspan"],A={class:"m-0 mb-0 inline-flex items-center justify-center p-0 pb-0 font-bold"},T={class:"mt-0 ml-2 pt-0 text-base font-normal"},I={key:0,class:"ml-auto text-sm"},q=["href"],J={key:1,class:"ml-2 animate-pulse text-sm text-red-600 italic"},K=["rowspan"],O={key:1,class:"animate-pulse text-xl font-bold text-red-700 italic"},U=w({__name:"CenterInfoView",setup(P){const m=k(),b=C(()=>{const a=new Map;for(const t of[...m.centers]){let e=a.get(t.group_id);e||(e={group_id:t.group_id,group_name:t.group_name??null,group_chief:t.group_chief??null,group_color:t.group_color??null,centers:[]},a.set(t.group_id,e)),e.centers.push(t)}for(const t of a.values())t.centers.sort((e,o)=>e.name.localeCompare(o.name));return Array.from(a.values()).sort((t,e)=>t.group_id-e.group_id)}),u=V([]),y=async()=>{const{data:a,error:t}=await v.from("center_detail_info").select("center_id, excel_link");t?console.error("Error fetching centers:",t):(a.forEach(e=>{console.log(e),e.excel_link&&u.value.push({center_id:e.center_id,excel_link:e.excel_link})}),console.log("Fetched center detail info:",a))};return z(()=>{y()}),(a,t)=>(l(),r(i,null,[t[7]||(t[7]=s("div",{class:"flex h-12 items-center px-6"},[s("h3",{class:"mr-4 text-xl font-black text-gray-700"},"EBS 자기주도학습센터 리스트"),s("a",{href:"/manager/map",class:"rounded-full border border-sky-600 px-4 py-0.5 text-sky-800"},"지도 보기")],-1)),t[8]||(t[8]=s("hr",null,null,-1)),s("div",F,[s("table",L,[s("thead",null,[s("tr",B,[s("th",E,[t[0]||(t[0]=p(" 거점센터 ",-1)),s("span",S,"("+n(b.value.length)+"개)",1)]),s("th",D,[t[1]||(t[1]=p(" 학습센터 ",-1)),s("span",N,"("+n(x(m).centers.length)+"개)",1),t[2]||(t[2]=s("span",{class:"ml-2 text-sm font-normal"},"(거점내 가나다순)",-1))]),t[3]||(t[3]=s("th",{class:"border px-2 py-1"},"개소일",-1)),t[4]||(t[4]=s("th",{class:"border px-2 py-1"},"센터장",-1)),t[5]||(t[5]=s("th",{class:"border px-2 py-1"},"예산구분",-1))])]),s("tbody",null,[(l(!0),r(i,null,f(b.value,e=>(l(),r(i,{key:e.group_id},[(l(!0),r(i,null,f(e.centers,(o,d)=>(l(),r("tr",{key:o.id},[d===0?(l(),r("td",{key:0,class:"border border-b-4 border-gray-600 px-2 py-1.5 text-center text-sm md:text-2xl",rowspan:e.centers.length},[s("div",A,[s("div",{class:"mr-2 h-10 w-10 rounded-xl p-0",style:c({backgroundColor:e.group_color?e.group_color:"#888888",color:x(H)(e.group_color??"#888888").color})},null,4),s("div",null,n(e.group_name),1)]),s("div",T," (소속센터: "+n(e.centers.length)+"개) ",1)],8,j)):h("",!0),s("td",{class:g(["border border-gray-600 px-2 py-1.5 text-sm md:text-base",{"border-b-4":d===e.centers.length-1}]),style:c({backgroundColor:e.group_color?e.group_color+"44":"#888888"})},[p(n(o.name)+" ",1),u.value.find(_=>_.center_id===o.id)?(l(),r("span",I,[s("a",{href:u.value.find(_=>_.center_id===o.id).excel_link??"#",target:"_blank"},[...t[6]||(t[6]=[M('<svg xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" viewBox="0 0 48 48" class="inline h-7 w-7"><path fill="#4CAF50" d="M41,10H25v28h16c0.553,0,1-0.447,1-1V11C42,10.447,41.553,10,41,10z"></path><path fill="#FFF" d="M32 15H39V18H32zM32 25H39V28H32zM32 30H39V33H32zM32 20H39V23H32zM25 15H30V18H25zM25 25H30V28H25zM25 30H30V33H25zM25 20H30V23H25z"></path><path fill="#2E7D32" d="M27 42L6 38 6 10 27 6z"></path><path fill="#FFF" d="M19.129,31l-2.411-4.561c-0.092-0.171-0.186-0.483-0.284-0.938h-0.037c-0.046,0.215-0.154,0.541-0.324,0.979L13.652,31H9.895l4.462-7.001L10.274,17h3.837l2.001,4.196c0.156,0.331,0.296,0.725,0.42,1.179h0.04c0.078-0.271,0.224-0.68,0.439-1.22L19.237,17h3.515l-4.199,6.939l4.316,7.059h-3.74V31z"></path></svg>',1)])],8,q)])):(l(),r("span",J,"(엑셀 미등록)"))],6),s("td",{class:g(["border border-gray-600 px-2 py-1 text-center",{"border-b-4":d===e.centers.length-1}]),style:c({backgroundColor:e.group_color?e.group_color+"44":"#888888"})},n(o.open_ymd??"미정"),7),d===0?(l(),r("td",{key:1,class:"border border-b-4 border-gray-600 px-2 py-1 text-center",style:c({backgroundColor:e.group_color?e.group_color+"44":"#888888"}),rowspan:e.centers.length},[e.group_chief?(l(),r(i,{key:0},[p(n(e.group_chief),1)],64)):(l(),r("span",O,"(미지정)"))],12,K)):h("",!0),s("td",{class:g(["border border-gray-600 px-2 py-1 text-center",{"border-b-4":d===e.centers.length-1,"bg-amber-100":o.is_moe_budget,"bg-blue-50":!o.is_moe_budget}])},[s("span",{class:g(["rounded-full px-1 py-0.5 text-sm text-white md:px-2 md:text-base",{"bg-amber-600":o.is_moe_budget,"bg-blue-400":!o.is_moe_budget}])},n(o.is_moe_budget?"특교":"지자체"),3)],2)]))),128))],64))),128))])])])],64))}});export{U as default};
