import{u as k,s as w,b as v}from"./colorUtil-DkzN_sWN.js";import{d as H,c as C,r as V,o as z,b as r,e as s,j as p,t as a,u as x,F as i,h as f,f as h,n as c,k as u,m as M,i as l}from"./index-DrMUz32T.js";const F={class:"wrapper w-[60rem] max-w-[96rem] overflow-x-auto px-6 py-4 md:w-full"},L={class:"mb-4 w-full border text-base"},B={class:"bg-gray-100 text-sm md:text-xl"},E={class:"border px-2 py-1"},S={class:"text-base font-normal"},D={class:"border px-2 py-1"},N={class:"text-base font-normal"},j=["rowspan"],A={class:"m-0 mb-0 inline-flex items-center justify-center p-0 pb-0 font-bold"},I={class:"mt-0 ml-2 pt-0 text-base font-normal"},T={class:"inline-flex w-full items-center justify-between"},q={key:0,class:"ml-auto text-sm"},J=["href"],K={key:1,class:"ml-2 animate-pulse text-sm text-red-600 italic"},O=["rowspan"],P={key:1,class:"animate-pulse text-xl font-bold text-red-700 italic"},W=H({__name:"CenterInfoView",setup(Q){const g=k(),b=C(()=>{const n=new Map;for(const e of[...g.centers]){let t=n.get(e.group_id);t||(t={group_id:e.group_id,group_name:e.group_name??null,group_chief:e.group_chief??null,group_color:e.group_color??null,centers:[]},n.set(e.group_id,t)),t.centers.push(e)}for(const e of n.values())e.centers.sort((t,o)=>t.name.localeCompare(o.name));return Array.from(n.values()).sort((e,t)=>e.group_id-t.group_id)}),m=V([]),y=async()=>{const{data:n,error:e}=await w.from("center_detail_info").select("center_id, excel_link");e?console.error("Error fetching centers:",e):n.forEach(t=>{t.excel_link&&m.value.push({center_id:t.center_id,excel_link:t.excel_link})})};return z(()=>{y()}),(n,e)=>(l(),r(i,null,[e[7]||(e[7]=s("div",{class:"flex h-12 items-center px-6"},[s("h3",{class:"mr-4 text-xl font-black text-gray-700"},"EBS 자기주도학습센터 리스트"),s("a",{href:"/manager/map",class:"rounded-full border border-sky-600 px-4 py-0.5 text-sky-800"},"지도 보기")],-1)),e[8]||(e[8]=s("hr",null,null,-1)),s("div",F,[s("table",L,[s("thead",null,[s("tr",B,[s("th",E,[e[0]||(e[0]=p(" 거점센터 ",-1)),s("span",S,"("+a(b.value.length)+"개)",1)]),s("th",D,[e[1]||(e[1]=p(" 학습센터 ",-1)),s("span",N,"("+a(x(g).centers.length)+"개)",1),e[2]||(e[2]=s("span",{class:"ml-2 text-sm font-normal"},"(거점내 가나다순)",-1))]),e[3]||(e[3]=s("th",{class:"border px-2 py-1"},"개소일",-1)),e[4]||(e[4]=s("th",{class:"border px-2 py-1"},"센터장",-1)),e[5]||(e[5]=s("th",{class:"border px-2 py-1"},"예산구분",-1))])]),s("tbody",null,[(l(!0),r(i,null,f(b.value,t=>(l(),r(i,{key:t.group_id},[(l(!0),r(i,null,f(t.centers,(o,d)=>(l(),r("tr",{key:o.id},[d===0?(l(),r("td",{key:0,class:"border border-b-4 border-gray-600 px-2 py-1.5 text-center text-sm md:text-2xl",rowspan:t.centers.length},[s("div",A,[s("div",{class:"mr-2 h-10 w-10 rounded-xl p-0",style:c({backgroundColor:t.group_color?t.group_color:"#888888",color:x(v)(t.group_color??"#888888").color})},null,4),s("div",null,a(t.group_name),1)]),s("div",I," (소속센터: "+a(t.centers.length)+"개) ",1)],8,j)):h("",!0),s("td",{class:u(["border border-gray-600 px-2 py-1.5 text-sm md:text-base",{"border-b-4":d===t.centers.length-1}]),style:c({backgroundColor:t.group_color?t.group_color+"44":"#888888"})},[s("div",T,[p(a(o.name)+" ",1),m.value.find(_=>_.center_id===o.id)?(l(),r("span",q,[s("a",{href:m.value.find(_=>_.center_id===o.id).excel_link??"#",target:"_blank"},[...e[6]||(e[6]=[M('<svg xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" viewBox="0 0 48 48" class="inline h-7 w-7"><path fill="#4CAF50" d="M41,10H25v28h16c0.553,0,1-0.447,1-1V11C42,10.447,41.553,10,41,10z"></path><path fill="#FFF" d="M32 15H39V18H32zM32 25H39V28H32zM32 30H39V33H32zM32 20H39V23H32zM25 15H30V18H25zM25 25H30V28H25zM25 30H30V33H25zM25 20H30V23H25z"></path><path fill="#2E7D32" d="M27 42L6 38 6 10 27 6z"></path><path fill="#FFF" d="M19.129,31l-2.411-4.561c-0.092-0.171-0.186-0.483-0.284-0.938h-0.037c-0.046,0.215-0.154,0.541-0.324,0.979L13.652,31H9.895l4.462-7.001L10.274,17h3.837l2.001,4.196c0.156,0.331,0.296,0.725,0.42,1.179h0.04c0.078-0.271,0.224-0.68,0.439-1.22L19.237,17h3.515l-4.199,6.939l4.316,7.059h-3.74V31z"></path></svg>',1)])],8,J)])):(l(),r("span",K,"(엑셀 미등록)"))])],6),s("td",{class:u(["border border-gray-600 px-2 py-1 text-center",{"border-b-4":d===t.centers.length-1}]),style:c({backgroundColor:t.group_color?t.group_color+"44":"#888888"})},a(o.open_ymd??"미정"),7),d===0?(l(),r("td",{key:1,class:"border border-b-4 border-gray-600 px-2 py-1 text-center",style:c({backgroundColor:t.group_color?t.group_color+"44":"#888888"}),rowspan:t.centers.length},[t.group_chief?(l(),r(i,{key:0},[p(a(t.group_chief),1)],64)):(l(),r("span",P,"(미지정)"))],12,O)):h("",!0),s("td",{class:u(["border border-gray-600 px-2 py-1 text-center",{"border-b-4":d===t.centers.length-1,"bg-amber-100":o.is_moe_budget,"bg-blue-50":!o.is_moe_budget}])},[s("span",{class:u(["rounded-full px-1 py-0.5 text-sm text-white md:px-2 md:text-base",{"bg-amber-600":o.is_moe_budget,"bg-blue-400":!o.is_moe_budget}])},a(o.is_moe_budget?"특교":"지자체"),3)],2)]))),128))],64))),128))])])])],64))}});export{W as default};
