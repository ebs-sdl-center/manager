import{u as y,s as k,b as H}from"./colorUtil-CTSWlwmt.js";import{d as w,c as C,r as V,o as v,a as l,b as o,g as b,F as c,e as m,j as _,n as p,u as z,t as d,h as g,k as M,f as a}from"./index-BOQCAbCB.js";const F={class:"wrapper px-2 py-4 md:px-6"},L={class:"mb-4 w-full border text-base"},B=["rowspan"],E={key:0,class:"ml-auto text-sm"},S=["href"],D=["rowspan"],j=w({__name:"CenterInfoView",setup(N){const x=y(),h=C(()=>{const s=new Map;for(const r of[...x.centers]){let e=s.get(r.group_id);e||(e={group_id:r.group_id,group_name:r.group_name??null,group_chief:r.group_chief??null,group_color:r.group_color??null,centers:[]},s.set(r.group_id,e)),e.centers.push(r)}for(const r of s.values())r.centers.sort((e,t)=>e.name.localeCompare(t.name));return Array.from(s.values()).sort((r,e)=>r.group_id-e.group_id)}),u=V([]),f=async()=>{const{data:s,error:r}=await k.from("center_detail_info").select("center_id, excel_link");r?console.error("Error fetching centers:",r):(s.forEach(e=>{console.log(e),e.excel_link&&u.value.push({center_id:e.center_id,excel_link:e.excel_link})}),console.log("Fetched center detail info:",s))};return v(()=>{f()}),(s,r)=>(a(),l(c,null,[r[2]||(r[2]=o("div",{class:"flex h-12 items-center px-6"},[o("h3",{class:"mr-4 text-xl font-black text-gray-700"},"EBS 자기주도학습센터 리스트"),o("a",{href:"/manager/map",class:"rounded-full border border-sky-600 px-4 py-0.5 text-sky-800"},"지도 보기")],-1)),r[3]||(r[3]=o("hr",null,null,-1)),o("div",F,[o("table",L,[r[1]||(r[1]=o("thead",null,[o("tr",{class:"bg-gray-100 text-sm md:text-xl"},[o("th",{class:"border px-2 py-1"},"거점센터"),o("th",{class:"border px-2 py-1"},[b(" 센터명 "),o("span",{class:"text-sm font-normal"},"(거점내 가나다순)")]),o("th",{class:"border px-2 py-1"},"개소일"),o("th",{class:"border px-2 py-1"},"센터장"),o("th",{class:"border px-2 py-1"},"예산구분")])],-1)),o("tbody",null,[(a(!0),l(c,null,m(h.value,e=>(a(),l(c,{key:e.group_id},[(a(!0),l(c,null,m(e.centers,(t,n)=>(a(),l("tr",{key:t.id},[n===0?(a(),l("td",{key:0,class:"border border-b-4 border-gray-600 px-2 py-1 text-center text-sm md:text-2xl",rowspan:e.centers.length,style:p({backgroundColor:e.group_color?e.group_color:"#888888",color:z(H)(e.group_color??"#888888").color})},d(e.group_name),13,B)):_("",!0),o("td",{class:g(["border border-gray-600 px-2 py-1",{"border-b-4":n===e.centers.length-1}]),style:p({backgroundColor:e.group_color?e.group_color+"44":"#888888"})},[b(d(t.name)+" ",1),u.value.find(i=>i.center_id===t.id)?(a(),l("span",E,[o("a",{href:u.value.find(i=>i.center_id===t.id).excel_link??"#",target:"_blank"},[...r[0]||(r[0]=[M('<svg xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" viewBox="0 0 48 48" class="inline h-7 w-7"><path fill="#4CAF50" d="M41,10H25v28h16c0.553,0,1-0.447,1-1V11C42,10.447,41.553,10,41,10z"></path><path fill="#FFF" d="M32 15H39V18H32zM32 25H39V28H32zM32 30H39V33H32zM32 20H39V23H32zM25 15H30V18H25zM25 25H30V28H25zM25 30H30V33H25zM25 20H30V23H25z"></path><path fill="#2E7D32" d="M27 42L6 38 6 10 27 6z"></path><path fill="#FFF" d="M19.129,31l-2.411-4.561c-0.092-0.171-0.186-0.483-0.284-0.938h-0.037c-0.046,0.215-0.154,0.541-0.324,0.979L13.652,31H9.895l4.462-7.001L10.274,17h3.837l2.001,4.196c0.156,0.331,0.296,0.725,0.42,1.179h0.04c0.078-0.271,0.224-0.68,0.439-1.22L19.237,17h3.515l-4.199,6.939l4.316,7.059h-3.74V31z"></path></svg>',1)])],8,S)])):_("",!0)],6),o("td",{class:g(["border border-gray-600 px-2 py-1 text-center",{"border-b-4":n===e.centers.length-1}]),style:p({backgroundColor:e.group_color?e.group_color+"44":"#888888"})},d(t.open_ymd??"미정"),7),n===0?(a(),l("td",{key:1,class:"border border-b-4 border-gray-600 px-2 py-1 text-center",style:p({backgroundColor:e.group_color?e.group_color+"44":"#888888"}),rowspan:e.centers.length},d(e.group_chief??"(미지정)"),13,D)):_("",!0),o("td",{class:g(["border border-gray-600 px-2 py-1 text-center",{"border-b-4":n===e.centers.length-1,"bg-amber-100":t.is_moe_budget,"bg-blue-50":!t.is_moe_budget}])},[o("span",{class:g(["rounded-full px-1 py-0.5 text-sm text-white md:px-2 md:text-base",{"bg-amber-600":t.is_moe_budget,"bg-blue-400":!t.is_moe_budget}])},d(t.is_moe_budget?"특교":"지자체"),3)],2)]))),128))],64))),128))])])])],64))}});export{j as default};
